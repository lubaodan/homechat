<h2>&#x51FD;&#x5B50;&#xFF08;Functors&#xFF09;</h2>
<p>&#x6001;&#x5C04;&#x662F;&#x7C7B;&#x578B;&#x4E4B;&#x95F4;&#x7684;&#x6620;&#x5C04;&#xFF1B;&#x51FD;&#x5B50;&#x662F;&#x8303;&#x7574;&#x4E4B;&#x95F4;&#x7684;&#x6620;&#x5C04;&#x3002;&#x53EF;&#x4EE5;&#x8BA4;&#x4E3A;&#x51FD;&#x5B50;&#x662F;&#x8FD9;&#x6837;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x4ECE;&#x4E00;&#x4E2A;&#x5BB9;&#x5668;&#x4E2D;&#x53D6;&#x51FA;&#x503C;&#xFF0C; &#x5E76;&#x5C06;&#x5176;&#x52A0;&#x5DE5;&#xFF0C;&#x7136;&#x540E;&#x653E;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x5BB9;&#x5668;&#x4E2D;&#x3002;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x8F93;&#x5165;&#x7684;&#x53C2;&#x6570;&#x662F;&#x7C7B;&#x578B;&#x7684;&#x6001;&#x5C04;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x8F93;&#x5165;&#x7684;&#x53C2;&#x6570;&#x662F;&#x5BB9;&#x5668;&#x3002;</p>
<div class="hint"> &#x51FD;&#x5B50;&#x7684;&#x51FD;&#x6570;&#x7B7E;&#x540D;&#x662F;&#x8FD9;&#x4E2A;&#x6837;&#x5B50;<br>
  // myFunctor :: (a -&gt; b) -&gt; f a -&gt; f b<br>
  &#x610F;&#x601D;&#x662F;&#x201C;&#x7ED9;&#x6211;&#x4E00;&#x4E2A;&#x4F20;&#x5165;a&#x8FD4;&#x56DE;b&#x7684;&#x51FD;&#x6570;&#x548C;&#x4E00;&#x4E2A;&#x5305;&#x542B;a&#xFF08;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#xFF09;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x6211;&#x4F1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5305;&#x542B;b&#xFF08;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#xFF09;&#x7684;&#x5BB9;&#x5668;&#x201D;
</div>
<h3>&#x521B;&#x5EFA;&#x51FD;&#x5B50;</h3>
<p>&#x8981;&#x77E5;&#x9053;&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x6709;&#x4E86;&#x4E00;&#x4E2A;&#x51FD;&#x5B50;&#xFF1A;map()&#xFF0C;&#x5B83;&#x652B;&#x53D6;&#x5305;&#x542B;&#x4E00;&#x4E9B;&#x503C;&#x7684;&#x5BB9;&#x5668;&#xFF08;&#x6570;&#x7EC4;&#xFF09;&#xFF0C;&#x7136;&#x540E;&#x628A;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4F5C;&#x7528;&#x4E8E;&#x5B83;&#x3002;</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span>sqrt<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Returns: [1, 2, 3]</span></code></pre>
<p>&#x7136;&#x800C;&#x6211;&#x4EEC;&#x8981;&#x628A;&#x5B83;&#x5199;&#x6210;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x51FD;&#x6570;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6570;&#x7EC4;&#x5BF9;&#x8C61;&#x7684;&#x65B9;&#x6CD5;&#x3002;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x540E;&#x9762;&#x5C31;&#x53EF;&#x4EE5;&#x5199;&#x51FA;&#x7B80;&#x6D01;&#x3001;&#x5B89;&#x5168;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment">// map :: (a -&gt; b) -&gt; [a] -&gt; [b]</span>
<span class="token keyword">var</span> map <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">arr</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x770B;&#x8D77;&#x6765;&#x50CF;&#x662F;&#x4E2A;&#x6545;&#x610F;&#x5F04;&#x7684;&#x5C01;&#x88C5;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x4EEC;&#x53EA;&#x662F;&#x628A;map()&#x51FD;&#x6570;&#x6362;&#x4E86;&#x4E2A;&#x5F62;&#x5F0F;&#x3002;&#x4F46;&#x8FD9;&#x6709;&#x5B83;&#x7684;&#x76EE;&#x7684;&#x3002; &#x5B83;&#x4E3A;&#x6620;&#x5C04;&#x5176;&#x5B83;&#x7C7B;&#x578B;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E2A;&#x6A21;&#x677F;&#x3002;</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment">// strmap :: (str -&gt; str) -&gt; str -&gt; str</span>
<span class="token keyword">var</span> strmap <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">str</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&apos;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&apos;&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3>&#x6570;&#x7EC4;&#x548C;&#x51FD;&#x5B50;</h3>
<p>&#x6570;&#x7EC4;&#x662F;&#x51FD;&#x6570;&#x5F0F;JavaScript&#x4F7F;&#x7528;&#x6570;&#x636E;&#x7684;&#x6700;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#x3002;</p>
<p>&#x662F;&#x5426;&#x6709;&#x4E00;&#x79CD;&#x7B80;&#x5355;&#x7684;&#x65B9;&#x6CD5;&#x6765;&#x521B;&#x5EFA;&#x5DF2;&#x7ECF;&#x5206;&#x914D;&#x4E86;&#x6001;&#x5C04;&#x7684;&#x51FD;&#x5B50;&#xFF1F;&#x6709;&#xFF0C;&#x5B83;&#x53EB;&#x505A;arrayOf&#x3002; &#x5F53;&#x4F60;&#x4F20;&#x5165;&#x4E00;&#x4E2A;&#x4EE5;&#x6574;&#x6570;&#x4E3A;&#x53C2;&#x6570;&#x3001;&#x8FD4;&#x56DE;&#x6570;&#x7EC4;&#x7684;&#x6001;&#x5C04;&#x65F6;&#xFF0C;&#x4F60;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x4EE5;&#x6574;&#x6570;&#x6570;&#x7EC4;&#x4E3A;&#x53C2;&#x6570;&#x8FD4;&#x56DE;&#x6570;&#x7EC4;&#x7684;&#x6570;&#x7EC4;&#x7684;&#x6001;&#x5C04;&#x3002;</p>
<p>&#x5B83;&#x81EA;&#x5DF1;&#x672C;&#x8EAB;&#x4E0D;&#x662F;&#x51FD;&#x5B50;&#xFF0C;&#x4F46;&#x662F;&#x5B83;&#x8BA9;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x7528;&#x6001;&#x5C04;&#x5EFA;&#x7ACB;&#x51FD;&#x5B50;&#x3002;</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token comment">// arrayOf :: (a -&gt; b) -&gt; ([a] -&gt; [b])</span>
<span class="token keyword">var</span> arrayOf <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token function">func</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">arr</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>&#x4E0B;&#x9762;&#x662F;&#x5982;&#x4F55;&#x7528;&#x6001;&#x5C04;&#x521B;&#x5EFA;&#x51FD;&#x5B50;</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> plusplusall <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>plusplus<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// plusplus&#x662F;&#x51FD;&#x5B50;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">plusplusall</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x8FD4;&#x56DE;[2,3,4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">plusplusall</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&apos;2&apos;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x629B;&#x51FA;&#x9519;&#x8BEF;</span>
</code></pre>
<h3>&#x51FD;&#x6570;&#x7EC4;&#x5408;&#xFF0C;&#x91CD;&#x8BBF;&#xFF08;revisited&#xFF09;</h3>
<p>&#x51FD;&#x6570;&#x4E5F;&#x662F;&#x4E00;&#x79CD;&#x6211;&#x4EEC;&#x80FD;&#x591F;&#x7528;&#x51FD;&#x5B50;&#x6765;&#x521B;&#x5EFA;&#x7684;&#x539F;&#x59CB;&#x7C7B;&#x578B;&#xFF0C;&#x8FD9;&#x4E2A;&#x51FD;&#x5B50;&#x53EB;&#x505A;&#x201C;fcompose&#x201D;&#x3002;&#x6211;&#x4EEC;&#x5BF9;&#x51FD;&#x5B50;&#x662F;&#x8FD9;&#x6837;&#x5B9A;&#x4E49;&#x7684;&#xFF1A; &#x5B83;&#x4ECE;&#x5BB9;&#x5668;&#x4E2D;&#x53D6;&#x4E00;&#x4E2A;&#x503C;&#xFF0C;&#x5E76;&#x5BF9;&#x5176;&#x5E94;&#x7528;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x3002;&#x5982;&#x679C;&#x8FD9;&#x4E2A;&#x5BB9;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF0C;&#x6211;&#x4EEC;&#x53EA;&#x9700;&#x8981;&#x8C03;&#x7528;&#x5B83;&#x5E76;&#x83B7;&#x53D6;&#x91CC;&#x9762;&#x7684;&#x503C;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x5DF2;&#x7ECF;&#x77E5;&#x9053;&#x4E86;&#x4EC0;&#x4E48;&#x662F;&#x51FD;&#x6570;&#x7EC4;&#x5408;&#xFF0C;&#x4E0D;&#x8FC7;&#x8BA9;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x770B;&#x5728;&#x8303;&#x7574;&#x8BBA;&#x9A71;&#x52A8;&#x7684;&#x73AF;&#x5883;&#x91CC;&#x5B83;&#x4EEC;&#x80FD;&#x505A;&#x4E9B;&#x4EC0;&#x4E48;&#x3002;</p>
<p>&#x51FD;&#x6570;&#x7EC4;&#x5408;&#x5C31;&#x662F;&#x7ED3;&#x5408;&#xFF08;associative&#xFF0C;&#x4E2D;&#x5B66;&#x6570;&#x5B66;&#x4E2D;&#x5B66;&#x5230;&#x7684;&#x201C;&#x7ED3;&#x5408;&#x5F8B;&#x201D;&#x4E2D;&#x7684;&#x201C;&#x7ED3;&#x5408;&#x201D;&#xFF09;&#x3002;&#x5982;&#x679C;&#x4F60;&#x7684;&#x9AD8;&#x4E2D;&#x4EE3;&#x6570;&#x8001;&#x5E08;&#x4E5F;&#x50CF;&#x6211;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x90A3;&#x5979;&#x53EA;&#x544A;&#x8BC9;&#x4E86;&#x4F60;&#x51FD;&#x6570;&#x7EC4;&#x5408;&#x7684;&#x5B9A;&#x5F8B;&#x6709;&#x4EC0;&#x4E48;&#xFF0C;&#x800C;&#x6CA1;&#x6709;&#x6CA1;&#x6559;&#x4F60;&#x7528;&#x5B83;&#x80FD;&#x505A;&#x4E9B;&#x4EC0;&#x4E48;&#x3002;&#x5728;&#x5B9E;&#x8DF5;&#x4E2D;&#xFF0C;&#x7EC4;&#x5408;&#x5C31;&#x662F;&#x7ED3;&#x5408;&#x5F8B;&#x6240;&#x80FD;&#x591F;&#x505A;&#x7684;&#x3002;</p>
<div class="legend-code-ctn">
<div class="legend-code"> (a &#xD7; b) &#xD7; c = a &#xD7; (b &#xD7; c) <br>
    (f<span class="ring-symbol">&#xA0;</span>g)<span class="ring-symbol">&#xA0;</span>h = f<span class="ring-symbol">&#xA0;</span>(g<span class="ring-symbol">&#xA0;</span>h)
  </div>
<br>
<div class="legend-code">f<span class="ring-symbol">&#xA0;</span>g &#x2260; g<span class="ring-symbol">&#xA0;</span>f    </div>

</div>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4EFB;&#x610F;&#x8FDB;&#x884C;&#x5185;&#x90E8;&#x7EC4;&#x5408;&#xFF0C;&#x65E0;&#x6240;&#x8C13;&#x600E;&#x6837;&#x5206;&#x7EC4;&#x3002;&#x4EA4;&#x6362;&#x5F8B;&#x4E5F;&#x6CA1;&#x6709;&#x4EC0;&#x4E48;&#x53EF;&#x8FF7;&#x60D1;&#x7684;&#x3002;f<span class="ring-symbol">&#xA0;</span>g &#x4E0D;&#x603B;&#x7B49;&#x4E8E; g<span class="ring-symbol">&#xA0;</span>f&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#xFF0C;&#x4E00;&#x4E2A;&#x53E5;&#x5B50;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x88AB;&#x53CD;&#x8F6C;&#x5E76;&#x4E0D;&#x7B49;&#x540C;&#x4E8E;&#x4E00;&#x4E2A;&#x88AB;&#x53CD;&#x8F6C;&#x7684;&#x53E5;&#x5B50;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x5355;&#x8BCD;&#x3002;</p>
<p>&#x603B;&#x7684;&#x6765;&#x8BF4;&#x610F;&#x601D;&#x5C31;&#x662F;&#x54EA;&#x4E2A;&#x51FD;&#x6570;&#x4EE5;&#x4EC0;&#x4E48;&#x6837;&#x7684;&#x987A;&#x5E8F;&#x88AB;&#x6267;&#x884C;&#x662F;&#x65E0;&#x6240;&#x8C13;&#x7684;&#xFF0C;&#x53EA;&#x8981;&#x6BCF;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x6765;&#x6E90;&#x4E8E;&#x4E0A;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x51FA;&#x3002;&#xFFFD;&#xFFFD;&#xFFFD;&#x8FC7;&#xFF0C;&#x7B49;&#x7B49;&#xFF0C;&#x5982;&#x679C;&#x53F3;&#x8FB9;&#x7684;&#x51FD;&#x6570;&#x4F9D;&#x8D56;&#x4E8E;&#x5DE6;&#x8FB9;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x4E0D;&#x5C31;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x56FA;&#x5B9A;&#x7684;&#x6C42;&#x503C;&#x987A;&#x5E8F;&#x5417;&#xFF1F;&#x4ECE;&#x5DE6;&#x5230;&#x53F3;&#xFF1F;&#x662F;&#x7684;&#xFF0C;&#x5982;&#x679C;&#x628A;&#x5B83;&#x5C01;&#x88C5;&#x8D77;&#x6765;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x6211;&#x4EEC;&#x611F;&#x89C9;&#x5408;&#x9002;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x63A7;&#x5236;&#x5B83;&#x3002;&#x8FD9;&#x5C31;&#x4F7F;&#x5F97;&#x5728;JavaScript&#x4E2D;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x60F0;&#x6027;&#x6C42;&#x503C;&#x3002;</p>
<div class="legend-code-ctn">
<div class="legend-code">
    (a &#xD7; b) &#xD7; c = a &#xD7; (b &#xD7; c)
    <br>
    (f<span class="ring-symbol">&#xA0;</span>g)<span class="ring-symbol">&#xA0;</span>h = f<span class="ring-symbol">&#xA0;</span>(g<span class="ring-symbol">&#xA0;</span>h)  
  </div>

</div>
<p>&#x6211;&#x4EEC;&#x6765;&#x91CD;&#x5199;&#x51FD;&#x6570;&#x7EC4;&#x5408;&#xFF0C;&#x4E0D;&#x4F5C;&#x4E3A;&#x51FD;&#x6570;&#x539F;&#x578B;&#x7684;&#x6269;&#x5C55;&#xFF0C;&#x800C;&#x662F;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x5355;&#x72EC;&#x7684;&#x51FD;&#x6570;&#xFF0C;&#x8FD9;&#x6837;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x7684;&#x5230;&#x66F4;&#x591A;&#x7684;&#x529F;&#x80FD;&#x3002;&#x57FA;&#x672C;&#x7684;&#x5F62;&#x5F0F;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF1A;</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> fcompose <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> g<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> f<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> g<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
<p>&#x4E0D;&#x8FC7;&#x6211;&#x4EEC;&#x8FD8;&#x5F97;&#x8BA9;&#x5B83;&#x80FD;&#x63A5;&#x53D7;&#x4EFB;&#x610F;&#x6570;&#x91CF;&#x7684;&#x8F93;&#x5165;&#x3002;</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> fcompose <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// &#x9996;&#x5148;&#x786E;&#x4FDD;&#x6240;&#x6709;&#x7684;&#x53C2;&#x6570;&#x90FD;&#x662F;&#x51FD;&#x6570;</span>
  <span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//&#x8BD1;&#x6CE8;&#xFF1A;&#x8FD9;&#x53E5;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x89C1;&#x4E0B;&#x9762;&#x6CE8;&#x91CA;</span>
  <span class="token comment">// &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4F5C;&#x7528;&#x4E8E;&#x6240;&#x6709;&#x51FD;&#x6570;&#x7684;&#x51FD;&#x6570;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> argsOfFuncs <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> funcs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      argsOfFuncs  <span class="token operator">=</span> <span class="token punctuation">[</span>funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// &#x4F8B;&#xFF1A;</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fcompose</span><span class="token punctuation">(</span>negate<span class="token punctuation">,</span> square<span class="token punctuation">,</span> mult2<span class="token punctuation">,</span> add1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x8FD4;&#x56DE;: -36</span></code></pre>
<div class="commentary">
<p>&#x7ED9;&#x539F;&#x8457;&#x52D8;&#x8BEF;&#xFF1A;&#x5982;&#x679C;&#x4F60;copy&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6267;&#x884C;&#x7684;&#x8BDD;&#x73B0;&#x5728;&#x80AF;&#x5B9A;&#x770B;&#x5230;&#x62A5;&#x9519;&#x4E86;&#xFF0C;&#x4E0A;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#x91CC;&#x7684;&#x9519;&#x8BEF;&#x8FD8;&#x771F;&#x4E0D;&#x5C11;&#x2026;&#x2026;</p>
<p> &#x9996;&#x5148;&#x4F1A;&#x5F97;&#x5230;&#x4E00;&#x4E2A;&#x9519;&#x8BEF;&#xFF1A;&#x201C;Uncaught TypeError: Error: Array expected, something else given.&#x201D;&#x3002; &#x54EA;&#x4E2A;&#x6570;&#x7EC4;&#x6CA1;&#x901A;&#x8FC7;&#x7C7B;&#x578B;&#x9A8C;&#x8BC1;&#x5462;&#xFF1F;&#x662F;fcompose&#x91CC;&#x7684;arguments&#x3002;&#x6211;&#x5728;&#x6700;&#x65B0;&#x7248;&#x672C;&#x7684;chrome&#x548C;&#x706B;&#x72D0;&#x91CC;&#x5F97;&#x5230;arguments&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x662F;[object Arguments]&#xFF0C; &#x800C;&#x4E14;arguments&#x5E76;&#x6CA1;&#x6709;&#x7EE7;&#x627F;Array&#xFF0C;&#x4E5F;&#x5C31;&#x6CA1;&#x6709;map&#x4E4B;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x4EE5;&#x8FD9;&#x91CC;&#x9700;&#x8981;&#x5148;&#x628A;arguments&#x8F6C;&#x6362;&#x6210;&#x6570;&#x7EC4;&#xFF0C;&#x628A;fcompose&#x51FD;&#x6570;&#x4F53;&#x7B2C;&#x4E00;&#x53E5;&#x6539;&#x6210;&#x8FD9;&#x6837;&#x5C31;&#x884C;&#xFF1A; <br>var funcs = arrayOf(func)(Array.prototype.slice.call(arguments));
  </p>
<p>
    &#x7136;&#x540E;&#x7B2C;&#x4E8C;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x4F4E;&#x7EA7;&#x9519;&#x8BEF;&#xFF0C;argsOfFuncs&#x548C;args&#x662F;&#x4E00;&#x4E2A;&#x4E1C;&#x897F;&#xFF0C;&#x7EDF;&#x4E00;&#x6210;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x540D;&#x5C31;&#x884C;&#x4E86;&#x3002;&#x6BD4;&#x5982;&#x8BF4;&#x628A;argsOfFuncs&#x90FD;&#x6539;&#x6210;args&#x5427;&#x3002;
    &#x987A;&#x4FBF;&#x8BF4;&#x4E00;&#x4E0B;&#x8FD9;&#x91CC;&#x7684;&#x610F;&#x601D;&#xFF0C;&#x9996;&#x5148;&#x628A;&#x521D;&#x59CB;&#x53C2;&#x6570;&#x8D4B;&#x7ED9;args&#xFF0C;&#x7136;&#x540E;&#x904D;&#x5386;&#x7EC4;&#x5408;&#x51FD;&#x6570;&#x7684;&#x6570;&#x7EC4;&#xFF0C;&#x6BCF;&#x6267;&#x884C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5C31;&#x628A;&#x8FD4;&#x56DE;&#x503C;&#x8D4B;&#x7ED9;args&#xFF0C;
    &#x8FD9;&#x6837;&#x4E0B;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x5C31;&#x80FD;&#x628A;&#x4E0A;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x6267;&#x884C;&#x7ED3;&#x679C;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x53C2;&#x6570;&#x4E86;&#x3002;&#x6CE8;&#x610F;&#x6BCF;&#x6B21;&#x7684;&#x8FD4;&#x56DE;&#x503C;&#x90FD;&#x653E;&#x5230;&#x4E86;&#x6570;&#x7EC4;&#x91CC;&#xFF0C;&#x662F;&#x4E3A;&#x4E86;&#x7B26;&#x5408;apply&#x7684;&#x53C2;&#x6570;&#x5F62;&#x5F0F;&#xFF0C;
    &#x800C;&#x6700;&#x540E;&#x8FD4;&#x56DE;&#x65F6;&#x53EA;&#x8981;&#x53D6;args&#x91CC;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#xFF08;&#x4E5F;&#x662F;&#x552F;&#x4E00;&#x4E00;&#x4E2A;&#xFF09;&#x503C;&#x5C31;&#x884C;&#x4E86;&#x3002;
  </p>
<p>
    &#x7B2C;&#x4E09;&#x4E2A;&#x9519;&#x8BEF;&#xFF0C;&#x8FD8;&#x662F;&#x4F4E;&#x7EA7;&#x9519;&#x8BEF;&#xFF0C;&#x904D;&#x5386;funcs&#x7684;&#x65F6;&#x5019;&#x8BA1;&#x6570;&#x5199;&#x6210;&#x4E86;length&#x5230;1&#xFF0C;&#x800C;&#x5B9E;&#x9645;&#x4E0A;&#x6211;&#x4EEC;&#x9700;&#x8981;length-1&#x5230;0&#x3002;
    &#x987A;&#x4FBF;&#x8BF4;&#x4E0B;&#x4E3A;&#x4EC0;&#x4E48;&#x8BA1;&#x6570;&#x8981;&#x4ECE;&#x5927;&#x5230;&#x5C0F;&#x5462;&#xFF1F;&#x56E0;&#x4E3A;&#x7EC4;&#x5408;&#x7684;&#x51FD;&#x6570;&#x8981;&#x4ECE;&#x53F3;&#x5F80;&#x5DE6;&#x6267;&#x884C;&#x3002;
  </p>
<p>&#x6700;&#x540E;&#xFF0C;&#x4E0A;&#x6B63;&#x786E;&#x7684;&#x4EE3;&#x7801;:</p>
<pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">var</span> fcompose <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token function">arrayOf</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>slice<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> args <span class="token operator">=</span> arguments<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> funcs<span class="token punctuation">.</span>length<span class="token number">-1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      args  <span class="token operator">=</span> <span class="token punctuation">[</span>funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>
</div>
<p>&#x73B0;&#x5728;&#x6211;&#x4EEC;&#x5C01;&#x88C5;&#x597D;&#x4E86;&#x8FD9;&#x4E9B;&#x51FD;&#x6570;&#x5E76;&#x53EF;&#x4EE5;&#x63A7;&#x5236;&#x5B83;&#x4EEC;&#x4E86;&#x3002;&#x6211;&#x4EEC;&#x91CD;&#x5199;&#x4E86;&#x7EC4;&#x5408;&#x51FD;&#x6570;&#x4F7F;&#x5F97;&#x6BCF;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x63A5;&#x53D7;&#x53E6;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#xFF0C; &#x5B58;&#x50A8;&#x8D77;&#x6765;&#xFF0C;&#x5E76;&#x540C;&#x6837;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x3002;&#x8FD9;&#x91CC;&#x5E76;&#x4E0D;&#x662F;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x4F5C;&#x4E3A;&#x8F93;&#x5165;&#x5904;&#x7406;&#x5B83;&#xFF0C;&#x800C;&#x662F;&#x5BF9;&#x6BCF;&#x4E00;&#x4E2A;&#x64CD;&#x4F5C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6570;&#x7EC4;&#xFF0C; &#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5728;&#x6E90;&#x5934;&#x4E0A;&#x8BA9;&#x6BCF;&#x4E00;&#x4E2A;&#x5143;&#x7D20;&#x63A5;&#x53D7;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#xFF0C;&#x628A;&#x6240;&#x6709;&#x64CD;&#x4F5C;&#x5408;&#x5230;&#x4E00;&#x8D77;&#x6267;&#x884C;&#xFF08;&#x6240;&#x6709;map&#x3001;filter&#x7B49;&#x7B49;&#x7EC4;&#x5408;&#x5230;&#x4E00;&#x8D77;&#xFF09;&#xFF0C; &#x6700;&#x7EC8;&#x628A;&#x7ED3;&#x679C;&#x5B58;&#x5230;&#x4E00;&#x4E2A;&#x65B0;&#x6570;&#x7EC4;&#x91CC;&#x3002;&#x8FD9;&#x5C31;&#x662F;&#x901A;&#x8FC7;&#x51FD;&#x6570;&#x7EC4;&#x5408;&#x5B9E;&#x73B0;&#x7684;&#x60F0;&#x6027;&#x6C42;&#x503C;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x6CA1;&#x6709;&#x7406;&#x7531;&#x91CD;&#x65B0;&#x9020;&#x8F6E;&#x5B50;&#xFF0C; &#x8BB8;&#x591A;&#x5E93;&#x5BF9;&#x4E8E;&#x8FD9;&#x4E2A;&#x6982;&#x5FF5;&#x90FD;&#x6709;&#x5F88;&#x597D;&#x7684;&#x5B9E;&#x73B0;&#xFF0C;&#x5305;&#x62EC;Lazy.js&#x3001;Bacon.js&#x4EE5;&#x53CA;wu.js&#x7B49;&#x5E93;&#x3002;</p>
<p>&#x5229;&#x7528;&#x8FD9;&#x4E00;&#x4E0D;&#x540C;&#x6A21;&#x5F0F;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x505A;&#x66F4;&#x591A;&#x4E8B;&#x60C5;&#xFF1A;&#x5F02;&#x6B65;&#x8FED;&#x4EE3;&#x3001;&#x5F02;&#x6B65;&#x4E8B;&#x4EF6;&#x5904;&#x7406;&#x3001;&#x60F0;&#x6027;&#x6C42;&#x503C;&#x751A;&#x81F3;&#x81EA;&#x52A8;&#x5E76;&#x884C;&#x3002;</p>
<div class="hint">&#x81EA;&#x52A8;&#x5E76;&#x884C;&#xFF1F;&#x5728;&#x8BA1;&#x7B97;&#x673A;&#x79D1;&#x5B66;&#x754C;&#x6709;&#x4E00;&#x4E2A;&#x8BCD;&#x53EB;&#x505A;&#xFF1A;IMPOSSIBLE&#x3002;&#x4F46;&#x662F;&#x8FD9;&#x771F;&#x7684;&#x4E0D;&#x53EF;&#x80FD;&#x5417;&#xFF1F; &#x6469;&#x5C14;&#x5B9A;&#x5F8B;&#x7684;&#x4E0B;&#x4E00;&#x4E2A;&#x98DE;&#x8DC3;&#x6CA1;&#x51C6;&#xFFFD;&#xFFFD;&#xFFFD;&#x4E00;&#x4E2A;&#x80FD;&#x591F;&#x5C06;&#x6211;&#x4EEC;&#x7684;&#x4EE3;&#x7801;&#x5E76;&#x884C;&#x5316;&#x7684;&#x7F16;&#x8BD1;&#x5668;&#xFF0C;&#x51FD;&#x6570;&#x7EC4;&#x5408;&#x80FD;&#x505A;&#x5230;&#x5417;&#xFF1F; &#x4E0D;&#xFF0C;&#x8FD9;&#x884C;&#x4E0D;&#x901A;&#x3002;JavaScript&#x5F15;&#x64CE;&#x5B9E;&#x73B0;&#x5E76;&#x884C;&#x5316;&#x5E76;&#x4E0D;&#x662F;&#x81EA;&#x52A8;&#x7684;&#xFF0C;&#x800C;&#x662F;&#x4F9D;&#x9760;&#x7CBE;&#x5FC3;&#x8BBE;&#x8BA1;&#x7684;&#x4EE3;&#x7801;&#x3002; &#x51FD;&#x6570;&#x7EC4;&#x5408;&#x53EA;&#x662F;&#x63D0;&#x4F9B;&#x4E86;&#x5207;&#x5206;&#x6210;&#x5E76;&#x884C;&#x8FDB;&#x7A0B;&#x7684;&#x673A;&#x4F1A;&#x3002;&#x4F46;&#x662F;&#x5B83;&#x672C;&#x8EAB;&#x5DF2;&#x7ECF;&#x8DB3;&#x591F;&#x9177;&#x4E86;&#x3002;</div>
<div class="catalog"><a class="undone">&#x4E0B;&#x4E00;&#x8282; &#x5355;&#x5B50;&#xFF08;Monads&#xFF09;</a></div>
<div class="catalog"><a href="http://www.cnblogs.com/tolg/p/4674991.html">&#x1F3E0; Functional Programming in Javascript &#x4E3B;&#x76EE;&#x5F55;</a><a href="http://www.cnblogs.com/tolg/p/4874289.html">&#x7B2C;&#x4E94;&#x7AE0; &#x8303;&#x7574;&#x8BBA;</a></div>